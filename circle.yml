machine:

  environment:
    BOOT_CLOJURE_VERSION: 1.6.0
    BOOT_VERSION: 2.0.0
    JAVA_OPTS: -XXMaxPermSize=256m

dependencies:
  pre:
    - wget -O boot "https://github.com/boot-clj/boot/releases/download/${BOOT_VERSION}/boot.sh"
    - chmod a+x boot
    - mv boot /home/ubuntu/bin
  override:
    - boot build-jar
  cache_directories:
    - "~/.m2"

test:
  override:
    - boot test-all

deployment:
  snapshot:
    branch: master
    commands:
      - boot build-jar push-snapshot

